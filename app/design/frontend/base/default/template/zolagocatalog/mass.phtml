<style>
#zolagocatalog_mass_grid .hor-scroll{
    overflow: hidden !important;
}
#scrollbar-container-x{
    width:100%;
    height:15px;
    bottom:0;
    left:0;
}
#scrollbar-container-y{
    width:15px;
    height:100%;
    top:0;
    right:0;
}
#scrollbar-container-x, #scrollbar-container-y{
    background:#CCC;
    position: absolute;
    opacity:0.4;
    /*display:none;*/
}
#zolagocatalog_mass_grid .grid:hover #scrollbar-container-x,
#zolagocatalog_mass_grid .grid:hover #scrollbar-container-y{
    /*display:block;*/
}
#scrollbar-container-x:hover, #scrollbar-container-y:hover,
#scrollbar-container-x.dragging, #scrollbar-container-y.dragging{
    opacity:0.8;
}
#scroll-handle-x{
    width:50px;
    height:100%;
    top:0;
    left:0;
}
#scroll-handle-y{
    width:100%;
    height:50px;
    top:0;
    left:0;
}
#scroll-handle-x, #scroll-handle-y{
    background:#999;
    border-radius:50px;
    position:absolute;
    cursor: pointer;
}
#scroll-handle-x:hover, #scroll-handle-y:hover,
#scrollbar-container-x.dragging #scroll-handle-x, #scrollbar-container-y.dragging #scroll-handle-y{
    background:#666;
}
</style>
<div class="container">
    <div class="page-header">
        <div class="page-title">
            <h3><?php echo Mage::helper("zolagocatalog")->__("Product mass actions");?></h3>
        </div>
    </div>

    <div id="attr-filters" class="row">
       <div class="col-md-12">
           <div class="widget box">
               <div class="widget-header">
<!--                   Filters-->
                   <h4><i class="icon-filter"></i><?php echo Mage::helper("zolagocatalog")->__("Filters");?></h4>
                   <div class="toolbar no-padding">
                       <div class="btn-group"><span class="btn btn-xs widget-collapse"><i class="icon-angle-down"></i></span></div>
                   </div>
               </div>
               <div class="widget-content fiters">
                   <form class="form-horizontal">
                       <div class="form-group">

                           <?php if ($this->getStoreSwitcherHtml()): ?>
                               <div class="col-md-6">
                                   <div class="row">
                                       <?php echo $this->getChildHtml("attribute_set_switcher"); ?>
                                   </div>
                               </div>
                               <div class="col-md-6">
                                   <div class="row">
                                       <?php echo $this->getStoreSwitcherHtml(); ?>
                                   </div>
                               </div>
                           <?php else: ?>
                               <div class="col-md-6">
                                   <div class="row">
                                       <?php echo $this->getChildHtml("attribute_set_switcher"); ?>
                                   </div>
                               </div>
                           <?php endif; ?>
                       </div>


                       <?php echo $this->getChildHtml("static_filter"); ?>
                   </form>
               </div>
           </div>
       </div>
    </div>
</div>



    <?php echo $this->getMessagesBlock()->getGroupedHtml(); ?>

    <?php if($this->getCurrentAttributeSetId()):?>
        <script type="text/javascript">
            FORM_KEY = "<?php echo Mage::getSingleton('core/session')->getFormKey() ?>";
        </script>
        <script type="text/javascript">
            var gridObj;
        </script>
        <div class="container z-grid">
            <div class="widget box">
                <div class="widget-content">
                    <?php

                    echo $this->getGridHtml(); ?>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            (function(){
                gridObj = <?php echo $this->getGridJsObjectName();?>;
                var topForm = $("filter_form");
                // create integrator
                new Zolago.gridIntegrator(gridObj);

                gridObj.doFilter = (function(){
                    var filters = $$('#'+this.containerId+' .filter input', '#'+this.containerId+' .filter select');
                    var filters2 = $$('#'+topForm.id+' input', '#'+topForm.id+' select');
                    var elements = [],
                        elements2 = [];
                    for(var i in filters){
                        if(filters[i].value && filters[i].value.length) elements.push(filters[i]);
                    }
                    for(var i in filters2){
                        if(filters2[i].value && filters2[i].value.length) elements2.push(filters2[i]);
                    }

                    var serialized = Form.serializeElements(elements);
                    var serialized2 = Form.serializeElements(elements2);
                    var params = []

                    if(serialized){
                        params.push(serialized);
                    }
                    if(serialized2){
                        params.push(serialized2);
                    }

                    if (!this.doFilterCallback || (this.doFilterCallback && this.doFilterCallback())) {
                        this.reload(this.addVarToUrl(this.filterVar, encode_base64(params.join("&"))));
                    }
                }).bind(gridObj);


                topForm.observe("submit", function(e){
                    gridObj.doFilter();
                    e.preventDefault();
                });
                topForm.observe("reset", function(e){
                    gridObj.resetFilter();
                    e.preventDefault();
                });

            })();
            // Do pickers
            jQuery(function($){
                $( ".datepicker" ).datepicker();

                $('#myModal').modal();

                $table = $("#zolagocatalog_mass_grid_table");

                $table.tableFreezer({parent: '#zolagocatalog_mass_grid .grid', freezeColumnsLeft: 3, lockScroller: true});

                // Hide filters
                $("#attr-filters").hide();

                var $popover = $("#filter-btn").popover({
                    content: $("#attr-filters").html(),
                    html: true,
                    container: "#content",
                    placement: "left",
                });

                $popover.on("show.bs.popover", function(e){
                    $popover.data()["bs.popover"].$tip.css("max-width", "850px").css("width", "850px");
                });

            });

        </script>
        <?php echo $this->getChildHtml("editor");?>

    <?php endif;?>

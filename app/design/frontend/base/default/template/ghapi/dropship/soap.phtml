<?php $_helper = Mage::helper("ghapi"); ?>
<div class="row">
	<div class="col-md-12">
		<form class="form-horizontal">
			<?php echo $this->getChildHtml('ghapi_dropship_soap_login');?>
			<?php echo $this->getChildHtml('ghapi_dropship_soap_message');?>
			<?php echo $this->getChildHtml('ghapi_dropship_soap_confirmation');?>
			<?php echo $this->getChildHtml('ghapi_dropship_soap_orders');?>
			<?php echo $this->getChildHtml('ghapi_dropship_soap_collected');?>
			<?php echo $this->getChildHtml('ghapi_dropship_soap_shipment');?>
			<?php //echo $this->getChildHtml('ghapi_dropship_soap_reservation');?>
			<div id="soap_ajax_answer">
				<strong><?php echo $_helper->__('SOAP Request');?></strong>
				<pre>
					<code class="language-markup" id="soap_request">
					</code>
				</pre>
				<strong><?php echo $_helper->__('SOAP Response');?></strong>
				<pre>
					<code class="language-markup" id="soap_response">
				</code>
				</pre>
			</div>
		</form>
	</div>
</div>

<script>
jQuery(function ($) {
	function doSoapAjax(params) {
        $('#soap_ajax_answer').html('<img src="/skin/frontend/default/udropship/img/bootsrap/ajax-loading.gif">');
		$.ajax({
			url: '/udropship/ghapi/test',
			method: 'POST',
			data: params,
			success: function(answer) {
				$('#soap_ajax_answer').html(answer);	
				Prism.highlightAll();
			}
		});
	};

    //doLogin
    $('#do_login_action').click(function(){doLogin(); })
    $('#soap_login_password').keypress(function (e) { if (e.which == 13) { doLogin(); return false;} });

    function doLogin(){
        var params = {};
        params.action = 'doLogin';
        params.vendorId = $('#soap_login_vendor_id').val();
        params.password = $('#soap_login_password').val();
        params.apiKey	= $('#soap_login_api_key').val();
        doSoapAjax(params);
    }
    //--doLogin


    //getChangeOrderMessage
    $('#get_message_action').click(function(){getChangeOrderMessage(); })
    $('#soap_message_type').keypress(function (e) { if (e.which == 13) { getChangeOrderMessage(); return false;} });

    function getChangeOrderMessage(){
        var params = {};
        params.action = 'getChangeOrderMessage';
        params.token = $('#soap_message_token').val();
        params.size = $('#soap_message_size').val();
        params.messageType	= $('#soap_message_type').val();
        doSoapAjax(params);
    }
    //--getChangeOrderMessage

    //setChangeOrderMessageConfirmation
    $('#confirm_message_action').click(function(){getChangeOrderMessage(); })
    $('#soap_confirm_list').keypress(function (e) { if (e.which == 13) { getChangeOrderMessage(); return false;} });

    function setChangeOrderMessageConfirmation(){
        var params = {};
        params.action = 'setChangeOrderMessageConfirmation';
        params.token = $('#soap_confirmation_token').val();
        params.list = $('#soap_confirm_list').val();
        doSoapAjax(params);
    }
    //--setChangeOrderMessageConfirmation

    //getOrdersByID
    $('#get_orders_action').click(function(){getOrdersByID(); })
    $('#soap_order_list').keypress(function (e) { if (e.which == 13) { getOrdersByID(); return false;} });

    function getOrdersByID(){
        var params = {};
        params.action = 'getOrdersByID';
        params.token = $('#soap_order_token').val();
        params.list = $('#soap_order_list').val();
        doSoapAjax(params);
    }
    //--getOrdersByID

    //setOrderAsCollected
    $('#set_collected_action').click(function(){setOrderAsCollected(); })
    $('#soap_collected_list').keypress(function (e) { if (e.which == 13) { setOrderAsCollected(); return false;} });

    function setOrderAsCollected(){
        var params = {};
        params.action = 'setOrderAsCollected';
        params.token = $('#soap_collected_token').val();
        params.list = $('#soap_collected_list').val();
        doSoapAjax(params);
    }
    //--setOrderAsCollected

 		
});
</script>
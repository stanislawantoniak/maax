<?php $_helper = Mage::helper("zolagopos");?>
<?php $_pos = $this->getModel();?>
<div class="container">
	<!--=== Page Header ===-->
	<div class="page-heading row">
		<div class="col-lg-6">
			<h3>
			<?php if($_pos->getId()):?>
				<?php echo $_helper->__("Edit POS");?> <?php echo $this->escapeHtml($_pos->getName());?>
			<?php else:?>
				<?php echo $_helper->__("Create POS");?>
			<?php endif;?>
			</h3>
		</div>
		<div class="main-actions align-right col-md-6">
		
		</div>
	</div>
</div>
<div class="container">
	<form id="edit-pos" class="form-horizontal row-border" action="<?php echo $this->getForm()->getAction();?>" method="POST">
		<input type="hidden" name="pos_id" value="<?php echo $_pos->getId();?>"/>
		<?php echo $this->getLayout()->getBlock('formkey')->toHtml();?>
		<?php echo $this->getFormHtml();?>
		<div class="form-actions"> <input type="submit" value="<?php echo $_helper->__("Save");?>" class="btn btn-primary pull-right"> </div>
	</form>
</div>

<script type="text/javascript">
jQuery(function($){
	var form = $("#edit-pos");
	new Zolago.formIntegrator(form);
	form.validate();
});
</script>

<script type="text/javascript">
	
		var posControl = {
			init: function () {
				var regionSelect= $('region_id');
				var regionText = new Element("input", {"type": "text", "id": "region", "class": "input-text form-control", "name": "region", "value": "<?php echo $this->escapeHtml($this->getModel()->getRegion());?>"});
				regionText.hide();
				regionSelect.insert({before: regionText});

				var updater = new RegionUpdater('country_id', 'region', 'region_id', <?php echo $this->helper('directory')->getRegionJson() ?>, undefined);
				$("use_dhl").observe("change", function(e){
					posControl.enableDhl($F(e.target)=="1");
				});
				$("use_orbaups").observe("change", function(e){
					posControl.enableUps($F(e.target)=="1");
				});
				posControl.enableUps($F("use_orbaups")=="1");
			},
			enableDhl: function(state){
				if(!!state){
					$("dhl_login").up('.form-group').show();
					$("dhl_password").up('.form-group').show();
					$("dhl_account").up('.form-group').show();
					$("dhl_ecas").up('.form-group').show();
					$("dhl_terminal").up('.form-group').show();
				}else{
					$("dhl_login").up('.form-group').hide();
					$("dhl_password").up('.form-group').hide();
					$("dhl_account").up('.form-group').hide();
					$("dhl_ecas").up('.form-group').hide();
					$("dhl_terminal").up('.form-group').hide();
				}
			},
			enableUps: function(state){
				if(!!state){
					$("orbaups_login").up('.form-group').show();
					$("orbaups_password").up('.form-group').show();
					$("orbaups_account").up('.form-group').show();
				}else{
					$("orbaups_login").up('.form-group').hide();
					$("orbaups_password").up('.form-group').hide();
					$("orbaups_account").up('.form-group').hide();
				}
			}
		};
		document.observe("dom:loaded", function() {
			posControl.init();
		});
</script>
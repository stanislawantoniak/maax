<?php
/**
 * Unirgy LLC
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the EULA
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.unirgy.com/LICENSE-M1.txt
 *
 * @category   Unirgy
 * @package    Unirgy_Dropship
 * @copyright  Copyright (c) 2008-2009 Unirgy LLC (http://www.unirgy.com)
 * @license    http:///www.unirgy.com/LICENSE-M1.txt
 */
?>

<?php
/**
 * Unirgy LLC
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the EULA
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.unirgy.com/LICENSE-M1.txt
 *
 * @category   Unirgy
 * @package    Unirgy_Dropship
 * @copyright  Copyright (c) 2008-2009 Unirgy LLC (http://www.unirgy.com)
 * @license    http:///www.unirgy.com/LICENSE-M1.txt
 */
?>

<?php
$_session = Mage::getSingleton('udropship/session');
$_vendor = Mage::registry('reset_vendor');
?>
<div class="col-md-12">
    <div class="col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-4">
        <div style="margin-top:100px;">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="a-center">
                        <strong>
                            <?php echo $this->__('Vendor Password Reset') ?>
                        </strong>
                    </h3>
                </div>
                <?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
                <div class="panel-body">
                    <form action="<?php echo $this->getUrl('udropship/vendor/passwordPost') ?>" method="post"
                          id="password-form" class="form-horizontal" role="form" autocomplete="off">


                        <?php if ($_vendor): ?>
                            <div style="margin-bottom: 15px" class="form-group">
                                <input type="hidden" name="confirm"
                                       value="<?php echo $_vendor->getRandomHash() ?>"/>
                                <label><?php echo $this->__('Email Address/User name') ?></label>
                                <input value="<?php echo htmlspecialchars($_vendor->getEmail()) ?>"
                                       title="<?php echo $this->__('Email') ?>" type="text"
                                       class="form-control input-lg input-text" disabled="disabled"/>
                            </div>
                            <div style="margin-bottom: 15px" class="form-group">
                                <label for="password"><?php echo $this->__('New Password') ?> <span
                                        class="required">*</span></label>
                                <input name="password" value=""
                                       title="<?php echo $this->__('New Password') ?>" id="password"
                                       type="password"
                                       class="form-control input-lg input-text required-entry validate-password"
                                    />
                            </div>
                            <div style="margin-bottom: 15px" class="form-group">
                                <label
                                    for="password_confirm"><?php echo $this->__('Confirm Password') ?>
                                    <span class="required">*</span></label>
                                <input name="password_confirm" value=""
                                       title="<?php echo $this->__('Confirm Password') ?>"
                                       id="password_confirm" type="password"
                                       class="form-control input-lg input-text required-entry validate-cpassword"
                                    />
                            </div>

                        <?php else: ?>

                            <div style="margin-bottom: 15px" class="form-group">
                                <label for="email"><?php echo $this->__('Email Address') ?> <span
                                        class="required">*</span></label>
                                <input name="email"
                                       value="<?php echo $this->htmlEscape($this->getUsername()) ?>"
                                       title="<?php echo $this->__('Email Address') ?>" id="email"
                                       type="text"
                                       class="form-control input-lg input-text required-entry validate-email"
                                    />
                            </div>
                        <?php endif ?>

                        <div class="form-group" style="margin-top:10px">
                            <label>
                                    <span class="required">
                                        <?php echo $this->__('* Required Fields') ?>
                                    </span>
                            </label>
                        </div>
                        <div class="form-group" style="margin-top:10px">
                            <div class="controls">
                                <button class="form-button btn btn-lg btn-primary btn-block" type="submit" name="send">
                                    <span><?php echo $this->__('Reset Password') ?></span>
                                </button>
                            </div>
                        </div>
                    </form>

                    <script type="text/javascript">
                        Translator.add('Please enter valid email address', '<?php echo $this->__('Please enter valid email address'); ?>');
                        Validation.addAllThese([
                            ['validate-email', Translator.translate('Please enter valid email address'), function (v) {
                                //return Validation.get('IsEmpty').test(v) || /\w{1,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/.test(v)
                                //return Validation.get('IsEmpty').test(v) || /^[\!\#$%\*/?|\^\{\}`~&\'\+\-=_a-z0-9][\!\#$%\*/?|\^\{\}`~&\'\+\-=_a-z0-9\.]{1,30}[\!\#$%\*/?|\^\{\}`~&\'\+\-=_a-z0-9]@([a-z0-9_-]{1,30}\.){1,5}[a-z]{2,4}$/i.test(v)
                                return Validation.get('IsEmpty').test(v) || /^([a-z0-9,!\#\$%&'\*\+\/=\?\^_`\{\|\}~-]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z0-9,!\#\$%&'\*\+\/=\?\^_`\{\|\}~-]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*@([a-z0-9-]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z0-9-]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*\.(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]){2,})$/i.test(v)
                            }]
                        ]);
                        var dataForm = new VarienForm('password-form', true);
                    </script>
                </div>
            </div>
        </div>
    </div>
</div>






<style type="text/css">
    #map-container {
        padding: 6px;
        border: 1px solid #ccc;
        -webkit-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
        -moz-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
        box-shadow: rgba(64, 64, 64, 0.1) 0 2px 5px;
    }

    #map {
        width: 100%;
        height: 450px;
    }

    #inline-actions {
        padding-top: 10px;
    }

    .item {
        margin-left: 20px;
    }
    .marker-window {
        max-width: 170px;
        text-align: center;
    }
    .info_window_text .iw_header {
        width: 100%;
        margin: 0;
        line-height: 1.2;
        text-transform: capitalize;
    }
    .info_window_text .iw_header .shop_name {
        display: block;
        text-transform: capitalize;
        font-style: normal;
        margin: 6px 0;
    }
</style>
<script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=true"></script>
<script src="/media/maps/data-small.json" type="text/javascript"></script>
<script>
    var styles = [[{
        url: '/media/cluster_icons/people35.png',
        width: 35,
        height: 35,
        textColor: '#ff00ff',
        textSize: 10
    }, {
        url: '/media/cluster_icons/people45.png',
        width: 45,
        height: 45,
        textColor: '#ff0000',
        textSize: 11
    }, {
        url: '/media/cluster_icons/people55.png',
        width: 55,
        height: 55,
        textColor: '#ffffff',
        textSize: 12
    }], [{
        url: '/media/cluster_icons/conv30.png',
        width: 30,
        height: 27,
        anchorText: [-3, 0],
        anchorIcon: [27, 28],
        textColor: '#ff00ff',
        textSize: 10
    }, {
        url: '/media/cluster_icons/conv40.png',
        width: 40,
        height: 36,
        anchorText: [-4, 0],
        anchorIcon: [36, 37],
        textColor: '#ff0000',
        textSize: 11
    }, {
        url: '/media/cluster_icons/conv50.png',
        width: 50,
        height: 45,
        anchorText: [-5, 0],
        anchorIcon: [45, 46],
        textColor: '#0000ff',
        textSize: 12
    }], [{
        url: '/media/cluster_icons/heart30.png',
        width: 30,
        height: 26,
        anchorIcon: [26, 15],
        textColor: '#ff00ff',
        textSize: 10
    }, {
        url: '/media/cluster_icons/heart40.png',
        width: 40,
        height: 35,
        anchorIcon: [35, 20],
        textColor: '#ff0000',
        textSize: 11
    }, {
        url: '/media/cluster_icons/heart50.png',
        width: 50,
        height: 44,
        anchorIcon: [44, 25],
        textSize: 12
    }
    ]];

    var markerClusterer = null;
    var map = null;
    var imageUrl = 'http://chart.apis.google.com/chart?cht=mm&chs=24x32&' +
        'chco=FFFFFF,008CFF,000000&ext=.png';
    google.maps.event.addDomListener(window, 'load', initialize);


    var markers = [];

    function refreshMap() {
        if (markerClusterer) {
            markerClusterer.clearMarkers();
        }

        var markerImage = new google.maps.MarkerImage(imageUrl,
            new google.maps.Size(24, 32));

        for (var i = 0; i < data.photos.length; ++i) {

            var latLng = new google.maps.LatLng(data.photos[i].latitude,
                data.photos[i].longitude);


            var marker = new google.maps.Marker({
                position: latLng,
                icon: markerImage,
                id:data.photos[i].id
            });


            var infowindow = new google.maps.InfoWindow({
                content: " "
            });
            var content = formatInfoWindowContent(data.photos[i]);
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(content);
                infowindow.open(map, this);
            });
            markers.push(marker);
        }


        //var zoom = parseInt(document.getElementById('zoom').value, 10);
        var size = parseInt(document.getElementById('size').value, 10);
        var style = parseInt(document.getElementById('style').value, 10);
        zoom = zoom == -1 ? null : zoom;
        size = size == -1 ? null : size;
        style = style == -1 ? null: style;

        markerClusterer = new MarkerClusterer(map, markers, {
            maxZoom: zoom,
            gridSize: size,
            styles: styles[style]
        });
    }

    function formatInfoWindowContent(data) {
        console.log(data.time_opened);
        var contentString =
            '<div class="marker-window">' +
            '<div class="info_window_text">' +
            '<p class="iw_header"><i class="shop_name bold">' + data.name + '</i></p>' +
            '<div class="marker-info-tel">' + data.telephone + '</div>' +
            '<div class="additional-store-information">' + data.time_opened + '</div>' +
            '</div>' +
            '</div>';
        return contentString;
    }


    function initialize() {
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 6,
            center: new google.maps.LatLng(52.4934482, 18.8979594),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var refresh = document.getElementById('refresh');
        google.maps.event.addDomListener(refresh, 'click', refreshMap);

        var clear = document.getElementById('clear');
        google.maps.event.addDomListener(clear, 'click', clearClusters);

        refreshMap();
    }

    function clearClusters(e) {
        e.preventDefault();
        e.stopPropagation();
        markerClusterer.clearMarkers();
    }

//    jQuery(document).ready(function(){
//        map = new GMaps({
//            div: '#map',
//            //lat: 52.4934482,
//            //lng: 18.8979594,
//            center: new google.maps.LatLng(52.4934482, 18.8979594),
//            zoom: 6,
//            click: function(e) {
//                alert('You clicked in this marker');
//            }
//        });
//    });
    /**
     * Function to filter markers by category
     */
    jQuery(document).ready(function(){


    })

</script>


<div class="container-fluid">
    <div class="col-md-12">
        <div class="container-fluid">
            <div class="col-md-7" id="#map-container">
                <div id="map"></div>
            </div>
            <div class="col-md-5">

                <div id="inline-actions" class="hidden">
      <span>Max zoom level:</span>
        <select id="zoom">
            <option value="-1">Default</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
        </select>
<br />
      <span class="item">Cluster size:</span>
        <select id="size">
            <option value="-1">Default</option>
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="40">40</option>
            <option value="50">50</option>
            <option value="70">70</option>
            <option value="80">80</option>
        </select>
                    <br />
      <span class="item">Cluster style:</span>
        <select id="style">
            <option value="-1">Default</option>
            <option value="0">People</option>
            <option value="1">Conversation</option>
            <option value="2">Heart</option>
        </select>
                    <br />
                    <input id="refresh" type="button" value="Refresh Map" class="item"/>
                    <a href="#" id="clear">Clear</a>
                </div>
            </div>

        </div>
    </div>
</div>
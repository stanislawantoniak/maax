<?php /* @var $this Zolago_Modago_Block_Checkout_Onepage_Shared_Address_Shipping */ ?>
<?php
/**
 * Author: Paweł Chyl <pawel.chyl@orba.pl>
 * Date: 08.09.2014
 */
/** @var Zolago_Checkout_Helper_Data $helper */
$helper = Mage::helper("zolagocheckout");
$_shippingAddress = $this->getQuote()->getShippingAddress();
$sameAsBilling = (int) $this->getQuote()->getShippingAddress()->getSameAsBilling();
$_cutomerAddressId = $_shippingAddress->getCustomerAddressId();

/** @var Zolago_Customer_Model_Session $customerSession */
$customerSession = Mage::getSingleton('customer/session');

$inpost					= $customerSession->getInpostLockerName();
//$inpost					= "WAW099";
$inpostStreet			= "Łęczycka";
$inpostStreetNumber		= 55;
$inpostZipCode			= "95-100";
$inpostCity				= "Warszawa";
$inpostDetails			= "(przy markecie Biedronka)";
$inpostLogo				= $this->getSkinUrl('images/inpost/checkout-logo.png');
?>

<fieldset>
    <input type="hidden" name="shipping[address_id]" value="<?php echo $_shippingAddress->getId(); ?>">
    <input type="hidden" name="shipping[region_id]" value="<?php echo $this->escapeHtml($_shippingAddress->getRegionId()); ?>">
    <input type="hidden" name="shipping[region]" value="<?php echo $this->escapeHtml($_shippingAddress->getRegion()); ?>">
    <input type="hidden" name="shipping[country_id]" value="<?php echo $this->getStoreDefaultCountryId();?>">
    <input type="hidden" name="shipping[fax]" value="<?php echo $this->escapeHtml($_shippingAddress->getFax()); ?>">
    <input type="hidden" name="shipping[save_in_address_book]" value="1">
    <input type="hidden" name="shipping[same_as_billing]" value="<?php echo $sameAsBilling; ?>">
    <input type="hidden" name="shipping_address_id" value="<?php /*echo $_cutomerAddressId;*/ ?>">
    <legend><?php echo $this->__("Shipping address"); ?></legend>
	<?php if(empty($inpost)): ?>
    <div class="form-group form-checkbox small">
        <input type="checkbox" name="shipping[different_shipping_address]" id="orders_someone_else" class="css-checkbox orders_someone_else" <?php if ($this->getOrderSomeoneElseFlag()) : ?>checked<?php endif; ?>>
        <label for="orders_someone_else" class="css-label orders_someone_else"><?php echo $this->__("I'm buing for someone else."); ?></label>
    </div>

    <div class="form-group clearfix <?php if (!$this->getOrderSomeoneElseFlag()) : ?>hidden<?php endif; ?> border-top orders_someone_else">
        <div class="form-group clearfix" style="margin-bottom: 15px;">
            <div class="row">
                <label class="col-lg-3 col-md-3 col-sm-3 col-xs-12" for="shipping_firstname"><?php echo $this->__("First name"); ?></label>
                <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12">
                    <input value="<?php echo $this->escapeHtml($_shippingAddress->getFirstname()); ?>" type="text" class="form-control firstName hint" required="true" id="shipping_firstname" title="" name="shipping[firstname]" <?php /* data-original-title="<?php echo $this->__("Enter name."); ?>" */ ?>>
                </div>
            </div>
        </div>
        <div class="form-group clearfix border-top">
            <div class="row">
                <label class="col-lg-3 col-md-3 col-sm-3 col-xs-12" for="shipping_lastname"><?php echo $this->__("Last name"); ?></label>
                <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12">
                    <input type="text" value="<?php echo $this->escapeHtml($_shippingAddress->getLastname()); ?>" class="form-control lastName hint" id="shipping_lastname" title="" name="shipping[lastname]" required="true" <?php /* data-original-title="<?php echo $this->__("Enter last name."); ?>" */ ?>>
                </div>
            </div>
        </div>
    </div>

    <div class="form-group clearfix border-top <?php if (!$this->getOrderSomeoneElseFlag()) : ?>hidden<?php endif; ?> orders_someone_else">
        <div class="row">
            <label class="col-lg-3 col-md-3 col-sm-3 col-xs-12" for="shipping_telephone"><?php echo $this->__("Telephone number"); ?></label>
            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12">
                <input type="tel" value="<?php echo $this->escapeHtml($_shippingAddress->getTelephone()); ?>" class="form-control validate-telephone phone" id="shipping_telephone" title="" name="shipping[telephone]" required="true" data-original-title="<?php echo $this->__("Phone number we need only to contact concerning orders for example courier delivering the shipment."); ?>">
            </div>
        </div>
    </div>

    <div class="form-group border-top clearfix">
        <div class="row">
            <label class="col-lg-3 col-md-3 col-sm-3 col-xs-12" for="shipping_street"><?php echo $this->__("Street and number"); ?></label>
            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12">
                <input type="text" value="<?php echo $this->escapeHtml(is_array($_shippingAddress->getStreet(-1)) ? explode(" ", $_shippingAddress->getStreet(-1)) : $_shippingAddress->getStreet(-1)); ?>" class="form-control street" id="shipping_street" title="" name="shipping[street][]" required="true" <?php /* data-original-title="<?php echo $this->__("Enter street and number."); ?>" */ ?>>
            </div>
        </div>
    </div>

    <div class="form-group clearfix border-top">
        <div class="row">
            <label class="col-lg-3 col-md-3 col-sm-3 col-xs-12" for="shipping_postcode"><?php echo $this->__("Zip code"); ?></label>
            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12">
                <input type="tel" value="<?php echo $this->escapeHtml($_shippingAddress->getPostcode()); ?>" class="form-control zipcode validate-postcodeWithReplace" required="true" id="shipping_postcode" title="" name="shipping[postcode]" data-original-title="<?php echo $this->__("Zip-code should be entered in the format xx-xxx."); ?>">
                <div id="zip-warning" class="checkout-warning"></div>
            </div>
        </div>
    </div>

    <div class="form-group clearfix border-top">
        <div class="row">
            <label class="col-lg-3 col-md-3 col-sm-3 col-xs-12" for="shipping_city"><?php echo $this->__("City"); ?></label>
            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12">
                <input type="text" value="<?php echo $this->escapeHtml($_shippingAddress->getCity()); ?>" class="form-control city hint" id="shipping_city" title="" name="shipping[city]" required="true" <?php /* data-original-title="<?php echo $this->__("Enter city name."); ?>" */ ?>>
            </div>
        </div>
    </div>

    <div class="form-group clearfix border-top hide-success-vaild">
        <div class="row">
            <label class="col-lg-3 col-md-3 col-sm-3 col-xs-12 double-line" for="shipping_company"><?php echo $this->__("Company<br>(optional)"); ?></label>
            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12">
                <input type="text" value="<?php echo $this->escapeHtml($_shippingAddress->getCompany()); ?>" class="form-control firm hint" id="shipping_company" title="" name="shipping[company]" <?php /* data-original-title="<?php echo $this->__("Enter company name."); ?>" */ ?>>
            </div>
        </div>
    </div>
	<?php else: // is InPost locker ?>
	<div id="inpost-wrapper" class="panel panel-default inpost-wrapper">
		<div class="panel-body">
			<div class="form-group">
				<input id="inpost_locker_name"
					   class=""
					   name="inpost[locker_name]"
					   value="<?php echo $inpost; ?>"
					   type="hidden">
				<div class="row">
					<div class="col-xs-7 col-sm-6 col-md-6 col-lg-6" >
						<strong><?php echo $helper->__("Locker InPost"); ?></strong>
						<br/>
						<span id="inpost-locker-street"><?php echo $inpostStreet; ?></span> <span id="inpost-locker-street-number"><?php echo $inpostStreetNumber; ?></span>
						<br/>
						<span id="inpost-locker-zip-code"><?php echo $inpostZipCode; ?></span> <span id="inpost-locker-city"><?php echo $inpostCity; ?></span>
						<br/>
						<span id="inpost-locker-details"><?php echo $inpostDetails; ?></span>
					</div>
					<div class="col-xs-5 col-sm-6 col-md-6 col-lg-6 text-right">
						<div class="figure-button-wrapper">
							<figure class="inpost-img">
								<div><img src="<?php echo $inpostLogo; ?>"></div>
							</figure>
							<br/>
							<a href="<?php echo Mage::getUrl("checkout/cart"); ?>" class="button button-third large change-locker"><?php echo $helper->__('Change'); ?></a>
						</div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
	<?php endif; ?>
</fieldset>
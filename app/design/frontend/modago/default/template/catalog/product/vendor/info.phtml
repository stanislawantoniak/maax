<?php /* @var $this Zolago_Catalog_Block_Product_Vendor_Info */ ?>
<?php
/**
 * Author: PaweÅ‚ Chyl <pawel.chyl@orba.pl>
 * Date: 21.07.2014
 */

?>
<?php
    $_deliveryreturnInfo = $this->getChild("product.vendor.deliveryreturn");
?>
<?php
$producer = ($this->getVendor()->getVendorId() == $this->getBrandshopVendor()->getVendorId());
?>
<div id="seller-box-bundle">
    <div class="row">
        <div class="col-lg-12 col-md-6 clearfix">
            <span class="seller-label  hidden-xs"><?php echo $this->__("Shop"); ?></span>
            <?php if (!$producer): ?>
                <figure>
                    <a href="<?php echo $this->getBrandshopVendorUrl(); ?>">
                        <img src="<?php echo Mage::getBaseUrl('media') . $this->getBrandshopVendor()->getLogo(); ?>" alt="<?php echo $this->escapeHtml($this->getBrandshopVendor()->getVendorName()); ?>">
                    </a>
                </figure>
                <div class="seller">
                    <div class="seller-info">
                        <a class="visible-xs clearfix" href="<?php echo $this->getBrandshopVendorUrl(); ?>">
                            <?php echo $this->__("Shop"); ?>: <?php echo $this->escapeHtml($this->getBrandshopVendor()->getVendorName()); ?>
                        </a>


                        <a class="clearfix" href="<?php echo $this->getVendorUrl(); ?>">
                            <?php echo $this->__("Seller"); ?>: <?php echo $this->escapeHtml($this->getVendor()->getVendorName()); ?>
                        </a>

                        <span><?php echo $this->escapeHtml($this->getVendor()->getBrandshopInfo()); ?></span>

                    </div>

                </div>
            <?php else: ?>
                <figure>
                    <img src="<?php echo $this->getLogoUrl(); ?>" alt="<?php echo $this->escapeHtml($this->getVendorName()); ?>">
                </figure>
                <div class="seller">
                    <div class="seller-info">
                        <a href="<?php echo $this->getVendorUrl(); ?>">
                            <?php echo $this->__("Seller"); ?>: <?php echo $this->escapeHtml($this->getVendorName()); ?>
                        </a>
                    </div>
                </div>
            <?php endif; ?>
        </div>
        <div class="col-lg-12 col-md-6 hidden-xs">
            <div class="seller-box-description block">
                <h3>
                    <a href="#" data-toggle="modal" data-target="#seller_description"><span><?php echo $this->__("Seller's info"); ?> <i class="bullet-plusik"></i></span>
                    </a>
                </h3>
            </div>
            <div class="seller-box-question block">
                <h3>
                    <a href="#" data-toggle="modal" data-target="#ask_question"><span><?php echo $this->__("Submit a question to seller"); ?> <i class="bullet-plusik"></i></span> </a>
                </h3>
            </div>
            <?php if($_deliveryreturnInfo) : ?>
            <div class="descripionProduct-box-comments block">
                <h3>
                    <a href="#" data-toggle="modal" data-target="#terms_delivery"><span><?php echo $this->__("RMA rules"); ?> <i class="bullet-plusik"></i></span>
                    </a>
                </h3>
            </div>
            <?php endif; ?>
        </div>
        <div class="col-lg-12 col-md-6 visible-xs">
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                <?php echo $this->__("Seller's info"); ?> <i class="bullet-strzalka-down"></i>
                            </a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse">
                        <div class="panel-body">
                            <dl>
                                <dd><?php echo $this->getVendorInfoHtml(); ?></dd>
                            </dl>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                                <?php echo $this->__("Submit a question to seller"); ?> <i class="bullet-strzalka-down"></i>
                            </a>
                        </h4>
                    </div>
                    <div id="collapseTwo" class="panel-collapse collapse">
                        <div class="panel-body">
                            <?php echo $this->getChildHtml('udqa.product.question.mobile'); ?>
                        </div>
                    </div>
                </div>
                <?php if($_deliveryreturnInfo): ?>
                <div class="panel panel-default last">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                                <?php echo $this->__("RMA rules"); ?> <i class="bullet-strzalka-down"></i>
                            </a>
                        </h4>
                    </div>
                    <div id="collapseThree" class="panel-collapse collapse">
                        <div class="panel-body">
                            <?php echo $_deliveryreturnInfo->getDeliveryreturnHtml(); ?>
                        </div>
                    </div>
                </div>
                <?php endif; ?>
            </div>
        </div>
    </div>



</div>

<?php if($_deliveryreturnInfo) : ?>
<div class="modal fade bs-example-modal-lg" id="terms_delivery" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="z-index: 1050">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"></button>
                <h2 class="title_section"><?php echo $this->__("DELIVERY & RETURNS"); ?></h2>
            </div>
            <div class="modal-body">
                <?php echo $_deliveryreturnInfo->getDeliveryreturnHtml(); ?>
            </div>
        </div>
    </div>
</div>
<?php endif; ?>

<div class="modal fade bs-example-modal-lg" id="seller_description" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="z-index: 1050">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"></button>
                <h2 class="title_section"><?php echo $this->__("SHOP INFO"); ?></h2>
            </div>
			
            <div class="modal-body">
				<?php if ($this->getVendorInfoHtml()): ?>
				<?php echo $this->getVendorInfoHtml(); ?>                
  				<?php else: ?>
					<dd>
		            	<img src="<?php echo $this->getLogoUrl(); ?>" alt="<?php echo $this->escapeHtml($this->getVendorName()); ?>"><br/>
	                    <strong><?php echo $this->__("Seller"); ?>:</strong> <?php echo $this->getVendorName(); ?>
					</dd>
				<?php endif;?>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    jQuery(function ($) {
        //fix for Chrome
        $(window).resize(function(){
            setSellerInfoBlockWidth($(this).width());
        })

        function setSellerInfoBlockWidth(w){
            console.log(w);
            if( w <= 754){
                $("#seller-box-bundle .seller").css({"width": "50%", "float": "right","margin-right": "5px"});

            } else {
                $("#seller-box-bundle .seller").css({"width": "100%", "float": "none"});

            }
        }
    })
</script>